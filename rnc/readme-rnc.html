<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Crane's RELAX-NG schemas for OASIS UBL</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e2"></a>Crane's RELAX-NG schemas for OASIS UBL</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">G. Ken</span> <span class="surname">Holman</span></h3><div class="affiliation"><span class="orgname">Crane Softwrights Ltd.<br></span><div class="address"><p><code class="email">&lt;<a href="mailto:gkholman@CraneSoftwrights.com">gkholman@CraneSoftwrights.com</a>&gt;</code></p></div></div></div></div></div><div><p class="copyright">Copyright &copy; 2010 Crane Softwrights Ltd.</p></div><div><p class="pubdate">$Date: 2011/05/17 17:30:09 $(UTC)</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e29">1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e59">2. Installation</a></span></dt><dt><span class="section"><a href="#d0e93">3. Integration and use</a></span></dt><dt><span class="section"><a href="#d0e133">4. Restriction</a></span></dt><dt><span class="bibliography"><a href="#d0e138">Bibliography</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e29"></a>1.&nbsp;Introduction</h2></div></div></div><p>This is a package of RELAX-NG compact syntax schemas [<a href="#b_relaxng" title="[RELAX-NG]"><span class="abbrev">RELAX-NG</span></a>] suitable for validating and directed editing of OASIS Universal Business Language (UBL) [<a href="#b_ubltc" title="[UBLTC]"><span class="abbrev">UBLTC</span></a>] XML instances.</p><p>This release supports instances of UBL 2.0 [<a href="#b_ubl20" title="[UBL 2.0]"><span class="abbrev">UBL 2.0</span></a>] and the UBL Schema Generation Task Group (SGTG) snapshot draft of UBL 2.1 [<a href="#b_ubl21-draft" title="[UBL SGTG 2.1]"><span class="abbrev">UBL SGTG 2.1</span></a>] with the time stamp of <code class="literal">20110517-1540z</code>, exclusive of the content of the extension point.</p><p>Support for the nXML major mode [<a href="#b_nxml" title="[nXML]"><span class="abbrev">nXML</span></a>] for Emacs is included.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e59"></a>2.&nbsp;Installation</h2></div></div></div><p>Unzipping the package creates the base directory with one RELAX-NG compact schema for each UBL document, plus the <code class="literal">ns-UBL-schemas.xml</code> association between namespaces and schemas suitable for directed editing tools such as Emacs with nXML.  To engage this file in nXML, add the following to your <code class="literal">schemas.xml</code> file of locating rules:</p><pre class="programlisting">  &lt;include rules="ns-UBL-schemas.xml"/&gt;
</pre><p>The <code class="literal">versions/</code> subdirectory has all of the individually-versioned RELAX-NG schemas, each with one modification from those published by the UBL committee:  the optional <code class="literal">UBLVersionID</code> has a hardwired element text value being the UBL version.</p><p>The aggregate document schema titled "<code class="literal">UBL-AllModels.rnc</code>" allows any UBL instance to be validated with the corresponding internally-referenced RELAX-NG document model.  Note, however, the magnitude of this aggregate schema may prove to exceed many processing capacities.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e93"></a>3.&nbsp;Integration and use</h2></div></div></div><p>To engage validating or directed editing of a UBL instance, point the application to the appropriate RNC file in the base directory.  Alternatively, pointing an application aware of the namespace association file will automatically engage the required RNC file from the base directory.</p><p>Each RNC file in the base directory will engage one or more modified schemas accommodating the available versions of the document type.  The unmodified versions are created from using the Sun MSV RELAX-NG converter [<a href="#b_rngconv" title="[RNGCONV]"><span class="abbrev">RNGCONV</span></a>] and James Clark's Trang  [<a href="#b_trang" title="[Trang]"><span class="abbrev">Trang</span></a>].  The modification ensures that when the <code class="literal">UBLVersionID</code> element is present it must be populated with the version number of one of the available versions.  Simply populating the element will ensure the remainder of the document is constrained accordingly.</p><p>For example, consider this Emacs/nXML example of an instance fragment that properly uses proposed UBL 2.1 elements:</p><pre class="programlisting">&lt;Invoice xmlns="urn:...&gt;
  &lt;cbc:UBLVersionID&gt;2.1&lt;/cbc:UBLVersionID&gt;
  &lt;cbc:CustomizationID&gt;urn:X-Crane&lt;/cbc:CustomizationID&gt;
  &lt;cbc:ProfileID&gt;urn:X-Crane:SimpleInvoice&lt;/cbc:ProfileID&gt;
  &lt;cbc:ID&gt;A123&lt;/cbc:ID&gt;
  &lt;cbc:CopyIndicator&gt;false&lt;/cbc:CopyIndicator&gt;
  &lt;cbc:IssueDate&gt;2010-03-31&lt;/cbc:IssueDate&gt;
  &lt;cbc:InvoiceDueDate&gt;2010-04-30&lt;/cbc:InvoiceDueDate&gt;
  &lt;cbc:Note&gt;Example invoice; not bona fide.&lt;/cbc:Note&gt;
  &lt;cbc:DocumentCurrencyCode&gt;CAD&lt;/cbc:DocumentCurrencyCode&gt;
  ...
</pre><p>Simply editing the version identifier to 2.0, and doing nothing else, highlights the proposed <code class="literal">InvoiceDueDate</code> as an unknown element in error:</p><pre class="programlisting">&lt;Invoice xmlns="urn:...&gt;
  &lt;cbc:UBLVersionID&gt;2.0&lt;/cbc:UBLVersionID&gt;
  &lt;cbc:CustomizationID&gt;urn:X-Crane&lt;/cbc:CustomizationID&gt;
  &lt;cbc:ProfileID&gt;urn:X-Crane:SimpleInvoice&lt;/cbc:ProfileID&gt;
  &lt;cbc:ID&gt;A123&lt;/cbc:ID&gt;
  &lt;cbc:CopyIndicator&gt;false&lt;/cbc:CopyIndicator&gt;
  &lt;cbc:IssueDate&gt;2010-03-31&lt;/cbc:IssueDate&gt;
  &lt;<span class="emphasis"><em>cbc:InvoiceDueDate</em></span>&gt;2010-04-30&lt;/<span class="emphasis"><em>cbc:InvoiceDueDate</em></span>&gt;
  &lt;cbc:Note&gt;Example invoice; not bona fide.&lt;/cbc:Note&gt;
  &lt;cbc:DocumentCurrencyCode&gt;CAD&lt;/cbc:DocumentCurrencyCode&gt;
  ...
</pre><p>Of course if you wish to hardwire the validation of any particular version of a UBL schema you can directly point to the versioned name in the <code class="literal">versions/</code> subdirectory.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e133"></a>4.&nbsp;Restriction</h2></div></div></div><p>At this time, due to a shortcoming of the RNGCONV tool, the content of the extension point is not validated even though the original XSD schemas for UBL 2.1 define a signature extension.  Hopefully this restriction will be lifted in the future with the advent of more precise tools.</p></div><div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a name="d0e138"></a>Bibliography</h2></div></div></div><div class="bibliomixed"><a name="b_nxml"></a><p class="bibliomixed">[<span class="abbrev">nXML</span>] James Clark <span class="title"><a href="http://www.thaiopensource.com/nxml-mode/" target="_top">nXML mode home page</a></span></p></div><div class="bibliomixed"><a name="b_relaxng"></a><p class="bibliomixed">[<span class="abbrev">RELAX-NG</span>] James Clark, Makoto Murata <span class="title"><a href="http://www.relax-ng.org/" target="_top">ISO/IEC 19757-2 RELAX-NG (Regular Language for XML)</a></span></p></div><div class="bibliomixed"><a name="b_rngconv"></a><p class="bibliomixed">[<span class="abbrev">RNGCONV</span>]  Kohsuke Kawaguchi <span class="title"><a href="https://msv.dev.java.net/" target="_top">RELAX-NG Converter - Sun Multi-Schema XML Validator component</a></span></p></div><div class="bibliomixed"><a name="b_trang"></a><p class="bibliomixed">[<span class="abbrev">Trang</span>]  James Clark <span class="title"><a href="http://www.thaiopensource.com/relaxng/trang.html" target="_top">Multi-format schema converter based on RELAX NG</a></span></p></div><div class="bibliomixed"><a name="b_ubl20"></a><p class="bibliomixed">[<span class="abbrev">UBL 2.0</span>] Jon Bosak, Tim McGrath, G. Ken Holman <span class="title"><a href="http://docs.oasis-open.org/ubl/os-UBL-2.0/" target="_top">Universal Business Language (UBL) Version 2.0</a></span>, <span class="title"><a href="http://docs.oasis-open.org/ubl/UBL-2.0-update.html" target="_top">UBL 2.0 Update (Errata)</a></span>,
<span class="title"><a href="http://www.oasis-open.org/committees/ubl/" target="_top">
OASIS UBL Technical Committee</a></span> 2006
</p></div><div class="bibliomixed"><a name="b_ubl21-draft"></a><p class="bibliomixed">[<span class="abbrev">UBL SGTG 2.1</span>] Jon Bosak, Tim McGrath, G. Ken Holman <span class="title">UBL Schema Generation Task Group snapshot draft for UBL 2.1 (time stamp <code class="literal">20110517-1540z</code>)</span>,
<span class="title"><a href="http://www.oasis-open.org/committees/document.php?document_id=42200" target="_top">OASIS UBL SGTG snapshot</a></span> 2011-05-17
</p></div><div class="bibliomixed"><a name="b_ubltc"></a><p class="bibliomixed">[<span class="abbrev">UBLTC</span>] Jon Bosak, Tim McGrath <span class="title"><a href="http://www.oasis-open.org/committees/ubl/" target="_top">
OASIS UBL Technical Committee</a></span> 2001
</p></div></div></div></body></html>